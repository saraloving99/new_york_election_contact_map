<!DOCTYPE html>
<html>
<head>
    <title>NY Board of Elections - County Map</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin: 0; padding: 0; font-family: sans-serif; background: #f4f7f6; }
        #map { height: 100vh; width: 100%; z-index: 1; }
        
        .search-container { 
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%); 
            z-index: 2000; width: 90%; max-width: 500px; 
        }
        input { 
            width: 100%; padding: 15px 25px; border-radius: 30px; border: 1px solid #ccc;
            font-size: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); outline: none;
        }

        .popup-card { min-width: 300px; font-size: 13px; color: #2d3436; }
        .popup-card h3 { margin: 0 0 10px; color: #003087; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        .d-blue { color: #0984e3; font-weight: bold; }
        .r-red { color: #d63031; font-weight: bold; }
        .staff-box { background: #f8f9fa; padding: 8px; border-radius: 4px; margin-top: 5px; border-left: 3px solid #003087; }

        /* Forces the mouse cursor to be a pointer over the counties */
        .leaflet-interactive { cursor: pointer !important; }
    </style>
</head>
<body>

    <div class="search-container">
        <input type="text" id="countyInput" placeholder="üîç Search or Click any NY County...">
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const map = L.map('map', { zoomControl: false }).setView([42.9, -75.6], 7);
        
        // Using a base map that includes labels
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; CartoDB'
        }).addTo(map);

        L.control.zoom({ position: 'bottomright' }).addTo(map);

        // Your County Data
        const fullData = [
            { n: "Albany", addr: "224 S. Pearl St, Albany", ph: "(518) 487-5060", d: "Alison C. McLean Lane", r: "Rachel L. Bledi", depD: "David J. Cady", depR: "Melissa Kermani", staff: "Debora Banks-Turner (R) Administrator" },
            { n: "Allegany", addr: "8 Willets Avenue, Belmont", ph: "(585) 268-9294", d: "Michael J. McCormick", r: "Brent L. Reynolds", depD: "Barbara Broughton", depR: "Marcy Crawford", staff: "" },
            { n: "Bronx", addr: "1780 Grand Concourse", ph: "(718) 299-9017", d: "Jodi Morales", r: "Gino A. Marmorato", depD: "Brendaliz Candelaria", depR: "Steven Guglielmi", staff: "Deputy Chief Clerks: (718) 960-0730" },
            { n: "Broome", addr: "60 Hawley St, Binghamton", ph: "(607) 778-2172", d: "Daniel D. Reynolds", r: "Mark E. Smith", depD: "Christina M. Dutko", depR: "Joseph J. Bertoni", staff: "" },
            { n: "Cattaraugus", addr: "207 Rock City St, Little Valley", ph: "(716) 938-2400", d: "Kevin C. Burleson", r: "Cortney L. Spittler", depD: "Laura D. Howard", depR: "Danielle R. Wing", staff: "" },
            { n: "Cayuga", addr: "157 Genesee St, Auburn", ph: "(315) 253-1285", d: "Keith Batman (D)", r: "Chantell Hotaling (R)", depD: "Katie Trojnor-Riley", depR: "Roberta Massarini", staff: "" },
            { n: "Chautauqua", addr: "7 North Erie St, Mayville", ph: "(716) 753-4580", d: "Luz E. Torres", r: "Nacole L. Ellis", depD: "Christopher Burt", depR: "Natalie Green", staff: "" },
            { n: "Chemung", addr: "378 S. Main St, Elmira", ph: "(607) 737-5475", d: "Mary M. Collins", r: "Sperry J. Navone", depD: "Tina M. Kane", depR: "Marcy M. Thomas", staff: "" },
            { n: "Chenango", addr: "5 Court St, Norwich", ph: "(607) 337-1764", d: "Carly J. Hendricks", r: "Derik M. Williams", depD: "Ryan Hitt", depR: "Kelsey Natoli", staff: "" },
            { n: "Clinton", addr: "137 Margaret St, Plattsburgh", ph: "(518) 565-4740", d: "Mary R. Dyer", r: "David J. Souliere IV", depD: "Melinda Guerin", depR: "Scott A. DuBrey", staff: "" },
            { n: "Columbia", addr: "401 State St, Hudson", ph: "(518) 828-3115", d: "Mara H. Estribou", r: "Kelly A. Miller-Simmons", depD: "Denise Keegan", depR: "Jody Nesbitt", staff: "" },
            { n: "Cortland", addr: "112 River St, Cortland", ph: "(607) 753-5032", d: "Thomas H. Brown", r: "Michelle S. Phelps", depD: "Angela 1. Burchfield", depR: "Karen A.C. Jenney", staff: "" },
            { n: "Delaware", addr: "97 Main St, Delhi", ph: "(607) 832-5321", d: "Judith L. Garrison", r: "Maria E. Kelso", depD: "Paula Schermerhorn", depR: "Christine Boest", staff: "" },
            { n: "Dutchess", addr: "112 Delafield St, Poughkeepsie", ph: "(845) 486-2473", d: "Lisa Jessup", r: "Erik J. Haight", depD: "Gillian Smith", depR: "Erin E. Reverri", staff: "" },
            { n: "Erie", addr: "134 W. Eagle St, Buffalo", ph: "(716) 858-8891", d: "Jeremy J. Zellner", r: "Ralph M. Mohr", depD: "Howard Johnson", depR: "Robin L. Sion", staff: "" },
            { n: "Essex", addr: "7551 Court St, Elizabethtown", ph: "(518) 873-3474", d: "Mary McGowan", r: "Roy Holzer", depD: "Jennifer L. Fifield", depR: "Krista Moran", staff: "" },
            { n: "Franklin", addr: "355 West Main St, Malone", ph: "(518) 481-1663", d: "Brandon John Varin", r: "Tracy Sparks", depD: "Eric Barney", depR: "Bridget Furman", staff: "" },
            { n: "Fulton", addr: "2714 St. Hwy 29, Johnstown", ph: "(518) 736-5526", d: "Robin Wentworth", r: "William E. Eschler", depD: "Rebecca Weiderman", depR: "Cinda J. Spraker", staff: "" },
            { n: "Genesee", addr: "15 Main St, Batavia", ph: "(585) 815-7804", d: "Lorie J. Longhany", r: "Scott D. German", depD: "Karen S. Gannon", depR: "Melissa L. Gaebler", staff: "" },
            { n: "Greene", addr: "411 Main St, Catskill", ph: "(518) 719-3550", d: "Deborah A. Fromer", r: "Brent Bogardus", depD: "Rebecca Cinatti", depR: "Elisa Schieren", staff: "" },
            { n: "Hamilton", addr: "102 County View Dr", ph: "(518) 548-4684", d: "Jade Sherman", r: "Gail P. Teal", depD: "N/A", depR: "N/A", staff: "" },
            { n: "Herkimer", addr: "109 Mary St, Herkimer", ph: "(315) 867-1102", d: "Robert J. Hoyt", r: "Teresa L. Robotham", depD: "Jon Karaffa", depR: "Cody Keeler", staff: "" },
            { n: "Jefferson", addr: "175 Arsenal St, Watertown", ph: "(315) 785-3027", d: "Michelle R. LaFave", r: "Tiffany E. Ladd", depD: "Tammy Gollaher", depR: "Heather Chaffee", staff: "" },
            { n: "Kings", addr: "345 Adams St, Brooklyn", ph: "(718) 797-8800", d: "Frank R. Seddio", r: "Simon Shamoun", depD: "Daniel Ortiz", depR: "Salvatore Barrera", staff: "" },
            { n: "Lewis", addr: "7660 North State St, Lowville", ph: "(315) 376-5329", d: "Lindsay Burriss", r: "Ramona Carpenter", depD: "Hannah Wilson", depR: "Devin C. Kogut", staff: "" },
            { n: "Livingston", addr: "6 Court St, Geneseo", ph: "(585) 243-7090", d: "David M. DiPasquale", r: "Gary J. Nageldinger", depD: "Amanda M. Coniglio", depR: "Alicia Strain", staff: "" },
            { n: "Madison", addr: "138 N. Court St, Wampsville", ph: "(315) 366-2231", d: "Laura A. Martino", r: "Mary F. Egger", depD: "Maggie D. Conley", depR: "Kathy R. Slade", staff: "" },
            { n: "Monroe", addr: "435 Smith St, Rochester", ph: "(585) 753-1550", d: "Jackie Ortiz", r: "Peter D. Elder", depD: "Natalie Sheppard", depR: "David W. Reilich", staff: "" },
            { n: "Montgomery", addr: "9 Park St, Fonda", ph: "(518) 853-8181", d: "Caroline A. Swartz", r: "Shawnna M. Weaver", depD: "Jessica Daniels", depR: "Violet Capece", staff: "" },
            { n: "Nassau", addr: "240 Old Country Rd, Mineola", ph: "(516) 571-8683", d: "James P. Scheuerman", r: "James V. Moriarty", depD: "N/A", depR: "N/A", staff: "" },
            { n: "New York", addr: "200 Varick St, New York", ph: "(212) 886-2100", d: "Marc A. Landis", r: "Frederic M. Umane", depD: "Rhonda Evans", depR: "Stephen M. Evans, III", staff: "" },
            { n: "Niagara", addr: "111 Main St, Lockport", ph: "(716) 438-4040", d: "Lora A. Allen", r: "Jennifer A. Sandonato", depD: "N/A", depR: "Michael P. Carney", staff: "" },
            { n: "Oneida", addr: "321 Main St, Utica", ph: "(315) 798-5765", d: "Sarah F. Bormann", r: "Nichole D. Shortell", depD: "Clarence A. Farrier", depR: "Sharie Fiorini-Parsons", staff: "" },
            { n: "Onondaga", addr: "1000 Erie Blvd W, Syracuse", ph: "(315) 435-8683", d: "Dustin M. Czarny", r: "Kevin P. Ryan", depD: "Desiree LaFave", depR: "Nicole Walsh", staff: "" },
            { n: "Ontario", addr: "74 Ontario St, Canandaigua", ph: "(585) 396-4005", d: "Albert J. (AJ) Magnan", r: "Adeline C. Rudolph", depD: "Elizabeth J. Yockel", depR: "Sarabeth Miller", staff: "" },
            { n: "Orange", addr: "75 Webster Ave, Goshen", ph: "(845) 360-6500", d: "Louise R. Vandemark", r: "Courtney Canfield Greene", depD: "Susan McDonald", depR: "Chandler Campbell", staff: "" },
            { n: "Orleans", addr: "14016 State Rt 31, Albion", ph: "(585) 589-3274", d: "Janice E. Grabowski", r: "Michael Mele", depD: "Abby Fitzwater", depR: "Christine Pask", staff: "" },
            { n: "Oswego", addr: "74 Bunner St, Oswego", ph: "(315) 349-8350", d: "Matthew Fleming", r: "Stacy Teifke", depD: "Crystal Hutchinson", depR: "Marianne Ingerson", staff: "" },
            { n: "Otsego", addr: "140 County Hwy 33W, Cooperstown", ph: "(607) 547-4247", d: "Michael Henrici", r: "Lori L. Lehenbauer", depD: "Cora Dawson", depR: "Christina Morrison", staff: "" },
            { n: "Putnam", addr: "25 Old Route 6, Carmel", ph: "(845) 808-1300", d: "Catherine P. Croft", r: "Kelly K. Primavera", depD: "Andrea Basli", depR: "Barbara A. Corrao", staff: "" },
            { n: "Queens", addr: "118-35 Queens Blvd, Forest Hills", ph: "(718) 730-6730", d: "Jose M. Araujo", r: "Keith Sullivan", depD: "Amanda Berinato", depR: "Bart J. Haggerty", staff: "" },
            { n: "Rensselaer", addr: "1600 Seventh Ave, Troy", ph: "(518) 270-2990", d: "Mary E. Sweeney", r: "Henry F. Zwack", depD: "Kimberly A. Nielsen", depR: "Nicole A. Ruffinen", staff: "" },
            { n: "Richmond", addr: "1 Edgewater Plaza, Staten Island", ph: "(718) 876-0079", d: "Michele A. Sileo", r: "Michael J. Coppotelli", depD: "Daniel P. Lavelle", depR: "Anthony J. Andriulli", staff: "" },
            { n: "Rockland", addr: "11 New Hempstead Rd, New City", ph: "(845) 638-5172", d: "Allison Weinraub", r: "Patricia A. Giblin", depD: "Michelle Reilly", depR: "Marino Fontana", staff: "" },
            { n: "St. Lawrence", addr: "80 State Hwy 310, Canton", ph: "(315) 379-2202", d: "Jennie H. Bacon", r: "Thomas A. Nichols", depD: "Gordon L. Ward, IV", depR: "Jesse M. Sovie", staff: "" },
            { n: "Saratoga", addr: "50 West High St, Ballston Spa", ph: "(518) 885-2249", d: "Cassandra M. Bagramian", r: "Joseph J. Suhrada", depD: "Samuel J. Olsen", depR: "Jennifer M. Weaver", staff: "" },
            { n: "Schenectady", addr: "2696 Hamburg St, Schenectady", ph: "(518) 377-2469", d: "Laura Fronk", r: "Darlene D. Harris", depD: "Cindy Vincitore", depR: "Loretta L. Rigney", staff: "" },
            { n: "Schoharie", addr: "284 Main St, Schoharie", ph: "(518) 295-8326", d: "N/A", r: "Kenneth J. Schweigard", depD: "Sara E. Masterson", depR: "Benjamin E. Cooper", staff: "" },
            { n: "Schuyler", addr: "105 9th St, Watkins Glen", ph: "(607) 535-8195", d: "Brian T. Eslinger", r: "Joseph Fazzary", depD: "Ali LaMoreaux", depR: "Kristina A. Vondracek", staff: "" },
            { n: "Seneca", addr: "One Di Pronio Dr, Waterloo", ph: "(315) 539-1760", d: "Carl J. Same", r: "Tiffany S. Folk", depD: "Heidi C. Conley", depR: "Kristofer Fisher", staff: "" },
            { n: "Steuben", addr: "3 E. Pulteney Sq, Bath", ph: "(607) 664-2240", d: "Colleen Hauryski", r: "Veronica (Vicky) L. Olin", depD: "Chad M. Cleland", depR: "Angie Cornish", staff: "" },
            { n: "Suffolk", addr: "Yaphank Ave, Yaphank", ph: "(631) 852-4500", d: "John Alberts", r: "Erin McTiernan", depD: "Gail M. Lolis", depR: "Maureen Getchell", staff: "" },
            { n: "Sullivan", addr: "100 North St, Monticello", ph: "(845) 807-0400", d: "Deanna M. Senyk", r: "Pamela D. Murran", depD: "Erica D. Heins", depR: "Cheyenne L. Foster", staff: "" },
            { n: "Tioga", addr: "1062 State Route 38, Owego", ph: "(607) 687-8261", d: "James C.E. Wahls", r: "Kelly A. Johnson", depD: "Amber Duke", depR: "James Hoover", staff: "" },
            { n: "Tompkins", addr: "128 East Buffalo St, Ithaca", ph: "(607) 274-5521", d: "Stephen M. DeWitt", r: "Alanna C.H. Congdon", depD: "Elizabeth Livesay", depR: "Diane Orlowski", staff: "" },
            { n: "Ulster", addr: "79 Hurley Ave, Kingston", ph: "(845) 334-5470", d: "Ashley Torres", r: "John P. Quigley", depD: "Jen Bloom", depR: "Keri L. Williams", staff: "" },
            { n: "Warren", addr: "1340 State Rt 9, Lake George", ph: "(518) 761-6456", d: "Elizabeth J. McLaughlin", r: "Harold Hubbard", depD: "Kimberly Ross", depR: "Caroline Clesceri", staff: "" },
            { n: "Washington", addr: "1153 Burgoyne Ave, Fort Edward", ph: "(518) 746-2180", d: "Jeffrey J. Curtis", r: "Stacey Baker", depD: "Melinda Suprenant", depR: "Elizabeth Ashley Skogsberg", staff: "" },
            { n: "Wayne", addr: "7376 State Rt 31, Lyons", ph: "(315) 946-7400", d: "Kristin L. Victorious", r: "Mindy L. Robinson", depD: "Ryan Brotons", depR: "Betty Rose Chardeen", staff: "" },
            { n: "Westchester", addr: "445 Hamilton Ave, White Plains", ph: "(914) 995-5700", d: "Tajian M. Nelson", r: "Douglas A. Colety", depD: "Frank S. Corvino", depR: "Christine A. Sculti", staff: "" },
            { n: "Wyoming", addr: "4 Perry Avenue, Warsaw", ph: "(585) 786-8931", d: "Harold J. Bush", r: "James Schlick", depD: "Candy Salmon", depR: "Alicia J. Brunner", staff: "" },
            { n: "Yates", addr: "417 Liberty St, Penn Yan", ph: "(315) 536-5135", d: "Robert F. Brechko", r: "Sheila M. Burt", depD: "Ruth (Toad) Bouchard", depR: "Sandy J. Burt", staff: "" }
        ];

        const countyLayers = {}; 

        // 3. Fetch Boundaries
        fetch("https://raw.githubusercontent.com/codeforamerica/click_that_hood/master/public/data/new-york-counties.geojson")
            .then(res => res.json())
            .then(geoData => {
                L.geoJSON(geoData, {
                    // Filter out center points, only keep shapes
                    filter: (f) => f.geometry.type !== 'Point',
                    style: {
                        color: "#003087",
                        weight: 1.5,
                        fillColor: "#0984e3",
                        fillOpacity: 0.1 // Keeping it very light so names show through
                    },
                    onEachFeature: function(feature, layer) {
                        const cName = feature.properties.name;
                        const item = fullData.find(d => d.n === cName);
                        
                        if (item) {
                            layer.bindPopup(`
                                <div class="popup-card">
                                    <h3>${item.n} County</h3>
                                    <span class="d-blue">DEM:</span> ${item.d}<br>
                                    <span class="r-red">REP:</span> ${item.r}<hr>
                                    üìç ${item.addr}<br>üìû ${item.ph}
                                </div>
                            `);
                            countyLayers[cName.toLowerCase()] = layer;
                        }

                        // IMPORTANT: Force the layer to be interactive
                        layer.on({
                            mouseover: (e) => e.target.setStyle({ fillOpacity: 0.4 }),
                            mouseout: (e) => e.target.setStyle({ fillOpacity: 0.1 }),
                            click: (e) => {
                                map.fitBounds(e.target.getBounds());
                                e.target.openPopup();
                            }
                        });
                    }
                }).addTo(map);
            });

        // 4. Search Handler
        document.getElementById('countyInput').addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase().trim();
            const layer = countyLayers[val];
            if (layer) {
                map.fitBounds(layer.getBounds());
                layer.openPopup();
            }
        });

        setTimeout(() => map.invalidateSize(), 500);
    </script>
</body>
</html>
